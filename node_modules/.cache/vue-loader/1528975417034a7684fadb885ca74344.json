{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vue-element-admin-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\vue-element-admin-master\\src\\components\\page\\sysmanager\\usermanager.vue?vue&type=style&index=0&id=743b8a53&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vue-element-admin-master\\src\\components\\page\\sysmanager\\usermanager.vue","mtime":1557223914000},{"path":"C:\\Users\\Administrator\\Desktop\\vue-element-admin-master\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vue-element-admin-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vue-element-admin-master\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vue-element-admin-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vue-element-admin-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.handle-box {\n  margin-bottom: 20px;\n}\n\n.handle-select {\n  width: 120px;\n}\n\n.handle-input {\n  width: 300px;\n  display: inline-block;\n}\n.del-dialog-cnt {\n  font-size: 16px;\n  text-align: center;\n}\n.table {\n  width: 100%;\n  font-size: 14px;\n}\n.red {\n  color: #ff0000;\n}\n.mr10 {\n  margin-right: 10px;\n}\n",{"version":3,"sources":["usermanager.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyRA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"usermanager.vue","sourceRoot":"src\\components\\page\\sysmanager","sourcesContent":["<template>\n  <div>\n    <div class=\"crumbs\">\n      <el-breadcrumb separator=\"/\">\n        <el-breadcrumb-item>用户管理</el-breadcrumb-item>\n      </el-breadcrumb>\n    </div>\n    <div class=\"container\">\n      <div class=\"handle-box\">\n        <el-button\n          type=\"primary\"\n          icon=\"delete\"\n          class=\"handle-del mr10\"\n          @click=\"delAll\"\n          :disabled=\"this.delData.length===0\"\n        >批量删除</el-button>\n        <el-input v-model=\"searchInfo\" placeholder=\"筛选关键词\" class=\"handle-input mr10\"></el-input>\n        <el-button type=\"primary\" icon=\"search\" @click=\"getUsers\">搜索</el-button>\n        <el-button type=\"primary\" @click=\"addUserVisible=true\">新建用户</el-button>\n      </div>\n      <el-table\n        :data=\"users\"\n        border\n        class=\"table\"\n        ref=\"multipleTable\"\n        @selection-change=\"handleSelectionChange\"\n        v-loading=\"isShowloading\"\n      >\n        <el-table-column type=\"selection\" width=\"55\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"orderNum\" label=\"序号\" sortable width=\"150\"></el-table-column>\n        <el-table-column prop=\"username\" label=\"用户名\" width=\"120\"></el-table-column>\n        <el-table-column prop=\"rolename\" label=\"角色名称\"></el-table-column>\n        <el-table-column prop=\"isable\" label=\"状态\" :formatter=\"formatterState\"></el-table-column>\n        <el-table-column prop=\"loginTime\" label=\"登录次数\"></el-table-column>\n        <el-table-column prop=\"loginDate\" label=\"登录时间\"></el-table-column>\n        <el-table-column prop=\"creater\" label=\"创建者\"></el-table-column>\n        <el-table-column label=\"操作\" width=\"180\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-button\n              type=\"text\"\n              icon=\"el-icon-edit\"\n              @click=\"handleEdit(scope.$index, scope.row)\"\n            >编辑</el-button>\n            <el-button\n              type=\"text\"\n              icon=\"el-icon-delete\"\n              class=\"red\"\n              @click=\"handleDelete(scope.$index, scope.row)\"\n            >删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class=\"pagination\">\n        <el-pagination\n          background\n          @current-change=\"currentChange\"\n          layout=\"prev, pager, next\"\n          :total=\"total\"\n          :page-size=\"pageSize\"\n        ></el-pagination>\n      </div>\n      <!-- 编辑框 -->\n      <el-dialog\n        title=\"修改信息\"\n        :visible.sync=\"editUserVisible\"\n        ref=\"editUserForm\"\n        :before-close=\"confirmClose\"\n        v-dialogDrag\n      >\n        <el-form :model=\"userForm\" :rules=\"editRule\" ref=\"editUserForm\">\n          <el-form-item label=\"用户名\" :label-width=\"formLabelWidth\" prop=\"username\">\n            <el-input v-model=\"userForm.username\" autocomplete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"状态\" :label-width=\"formLabelWidth\">\n            <el-radio v-model=\"userForm.isable\" label=\"1\">正常</el-radio>\n            <el-radio v-model=\"userForm.isable\" label=\"0\">禁用</el-radio>\n          </el-form-item>\n        </el-form>\n        <div slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"editUserVisible=false\">取 消</el-button>\n          <el-button type=\"primary\" @click.native=\"editUser\">确 定</el-button>\n        </div>\n      </el-dialog>\n      <!-- 新建用户 -->\n      <el-dialog title=\"新建用户\" :visible.sync=\"addUserVisible\" ref=\"addUserForm\" v-dialogDrag>\n        <el-form :model=\"addUserForm\" :rules=\"addUserRule\">\n          <el-form-item label=\"用户名\" :label-width=\"formLabelWidth\" prop=\"username\">\n            <el-input v-model=\"addUserForm.username\" autocomplete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"角色名称\" :label-width=\"formLabelWidth\" prop=\"rolename\">\n            <el-select v-model=\"addUserForm.rolename\">\n              <el-option label=\"admin\" value=\"admin\"></el-option>\n              <el-option label=\"管理员\" value=\"管理员\"></el-option>\n              <el-option label=\"超级管理员\" value=\"超级管理员\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"状态\" :label-width=\"formLabelWidth\">\n            <el-radio v-model=\"addUserForm.isable\" label=\"1\">正常</el-radio>\n            <el-radio v-model=\"addUserForm.isable\" label=\"0\">禁用</el-radio>\n          </el-form-item>\n        </el-form>\n        <div slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"addUserVisible = false\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"saveUser\">确 定</el-button>\n        </div>\n      </el-dialog>\n    </div>\n  </div>\n</template>\n<script>\nimport {\n  getUserList,\n  getDeleUser,\n  getEditUser,\n  getAddUser,\n  getDeleteOne,\n  testApi\n} from \"../../../api/api\";\nexport default {\n  data() {\n    return {\n      url:\"\",\n      searchInfo: \"\",\n      users: [],\n      total: 0,\n      pageNo: 1,\n      pageSize: 20,\n      isShowloading: false,\n      delData: [], //删除的数据\n      editUserVisible: false, //是否显示编辑\n      addUserVisible: false, //新建用户框\n      userForm: {}, //编辑数据\n      addUserForm: {\n        username: \"\",\n        rolename: \"\",\n        isable: \"0\"\n      }, //添加用户数据\n      addUserRule: {\n        username: [\n          { required: true, message: \"请输入用户名\", trigger: \"blur\" }\n        ],\n        rolename: [\n          {\n            required: true,\n            message: \"请选择角色\",\n            trigger: \"change\"\n          }\n        ]\n      },\n      editRule: {\n        username: [\n          {\n            required: true,\n            message: \"请输入姓名\",\n            trigger: \"blur\"\n          }\n        ]\n      },\n      formLabelWidth: \"120px\"\n    };\n  },\n  methods: {\n    formatterState(row, cloumn) {\n      return row.isable == \"1\" ? \"正常\" : \"禁用\";\n    },\n    getUsers() {\n      this.isShowloading = true;\n      let params = {\n        searchInfo: this.searchInfo.trim(),\n        page: this.pageNo\n      };\n      getUserList(params).then(res => {\n        this.users = res.data.users;\n        this.total = res.data.total;\n        this.isShowloading = false;\n      });\n    },\n    currentChange(val) {\n      this.pageNo = val;\n      this.getUsers();\n    },\n    handleSelectionChange(delData) {\n      this.delData = delData;\n    },\n    saveUser() {\n      let params = Object.assign({}, this.addUserForm);\n      params.username = params.username.trim();\n      getAddUser(params).then(res => {\n        this.$message({\n          message: \"添加成功\",\n          type: \"success\"\n        });\n        this.addUserVisible = false;\n        this.addUserForm = {};\n        this.getUsers();\n      });\n    },\n    delAll() {\n      this.$confirm(\"确认删除该用户吗?\", \"提示\", {\n        type: \"warning\"\n      }).then(() => {\n        this.isShowloading = true;\n        let delIds = this.delData.map(item => item.userid).toString();\n        let params = {\n          delIds: delIds\n        };\n        getDeleUser(params).then(res => {\n          this.isShowloading = false;\n          this.$message({\n            message: \"删除成功\",\n            type: \"success\"\n          });\n          this.getUsers();\n        });\n      });\n    },\n    handleEdit(index, row) {\n      this.editUserVisible = true;\n      this.userForm = Object.assign({}, row);\n    },\n    handleDelete(index, row) {\n      let params = {\n        userid: row.userid\n      };\n      this.$confirm(\"确认删除该用户？\", \"提示\", {\n        type: \"warning\"\n      }).then(() => {\n        getDeleteOne(params).then(res => {\n          this.$message({\n            type: \"success\",\n            message: \"删除成功\"\n          });\n          this.getUsers();\n        });\n      });\n    },\n    editUser() {\n      debugger\n      this.$refs['editUserForm'].validate((valid) => {\n        debugger\n        if (valid) {\n          let params = this.userForm;\n          getEditUser(params)\n            .then(res => {\n              this.$message({\n                type: \"success\",\n                message: res.data.msg\n              });\n              this.getUsers();\n              this.editUserVisible = false;\n              this.userForm = {};\n            })\n            .bind(this);\n        }\n      });\n    },\n    confirmClose(done) {\n      this.$confirm(\"确认关闭将丢失已编辑内容？\", \"提示\", {\n        type: \"warning\"\n      }).then(() => {\n        this.userForm = {};\n        done();\n      });\n    },\n    testFn(){\n      this.url = '/ms/table/list';\n      this.$axios.get(this.url).then(res=>{\n        console.log(res)\n      })\n      testApi().then(res=>{\n        console.log(res)\n      })\n    }\n  },\n  mounted() {\n    //this.getUsers();\n    this.testFn();\n  }\n};\n</script>\n<style scoped>\n.handle-box {\n  margin-bottom: 20px;\n}\n\n.handle-select {\n  width: 120px;\n}\n\n.handle-input {\n  width: 300px;\n  display: inline-block;\n}\n.del-dialog-cnt {\n  font-size: 16px;\n  text-align: center;\n}\n.table {\n  width: 100%;\n  font-size: 14px;\n}\n.red {\n  color: #ff0000;\n}\n.mr10 {\n  margin-right: 10px;\n}\n</style>\n\n"]}]}